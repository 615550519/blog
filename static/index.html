<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <link rel="stylesheet" href="./public/css/bar.css">
    <script src="./plugs/jquery-2.1.3.min.js"></script>
</head>
<body>
    <div class="loading-bar">
        <div class="area area-red"><div class="num">1</div></div>
        <div class="area area-red"><div class="num">2</div></div>
        <div class="area area-red"><div class="num">3</div></div>
        <div class="area area-red"><div class="num">4</div></div>
        <div class="area area-yellow"><div class="num">5</div></div>
        <div class="area area-yellow"><div class="num">6</div></div>
        <div class="area area-yellow"><div class="num">7</div></div>
        <div class="area area-yellow"><div class="num">8</div></div>
        <div class="area area-blue"><div class="num">9</div></div>
        <div class="area area-blue"><div class="num">10</div></div>
        <div class="diamond"></div>
        <script type="text/javascript">
            $(".loading-bar").each(function(){
                var $this = $(this);
                var w = $this.width();
                var diamond = $this.find(".diamond");
                var isDown = false;
                var count = 0;
                $this.on("mousedown", function(){
                    isDown = true;
                });
                $(document).on("mousemove",function(e){
                    var e = e || window.event;
                    if(isDown){
                        count++;
                        if(0==count%3){
                            count = 0;
                            var x = e.clientX  - $this[0].offsetLeft;
                            var r = x / w;
                            if(r>=0.4 && r<=0.8){
                                diamond.css({
                                    left: (r*100)+"%"
                                });
                            }
                        }
                    }
                });
                $(document).on("mouseup",function(){
                    isDown = false;
                    count = 0;
                });
            });
        </script>
    </div>
</body>
</html>